#!/.bin/bash

echo
echo
echo "Installing Apache Webserver"
echo
apt install apache2 -y
#

echo
echo
echo "Configuring Firewall"
echo
ufw status
ufw allow openssh
ufw allow in "Apache Full"
ufw enable
ufw status
#

echo
echo
echo "Finishing up with Apache"
echo
a2dismod mpm_event
a2enmod mpm_prefork
#
systemctl restart apache2
#systemctl status apache2
#

echo
echo
echo "Installing MariaDB"
echo
apt install mariadb-server -y
systemctl status mariadb
systemctl enable mariadb
echo
echo
echo "Do not switch socket authentication or change the root password"
echo "Answer Yes to the following DB installation questions:"
echo "1 Remove anonymous users?"
echo "2 Dissallow root login remotely?"
echo "3 Remove test database and access to it?"
echo "4 Reload privilege tables now?"
#
mysql_secure_installation
#

echo "## Enter the following into the database program"
echo "CREATE DATABASE nextcloud;"
echo "SHOW DATABASES;"
echo "GRANT ALL PRIVILEGES ON nextcloud.* TO 'nextcloud'@'localhost' IDENTIFIED BY '1UbUnTu!UbUnTu';"
echo "FLUSH PRIVILEGES;"
echo "quit"
echo
# sudo mysql -u root

a2ensite nextcloud.conf
"







